<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]--><!-- Mirrored from docs.slimframework.com/routing/middleware/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 May 2015 15:53:06 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  
  <title>Middleware - Slim Framework v2</title>
  

  
  

  <link href="../../css/theme.css" rel="stylesheet" type="text/css"/>
  <link href="../../css/theme_extra.css" rel="stylesheet" type="text/css"/>
  <link href="../../css/highlight.css" rel="stylesheet"/>

  
  
  
  

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
      <div class="wy-side-nav-search">
        <a class="icon icon-home" href="../../index.html"> Slim Framework v2</a>
        
      </div>

      <div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
      <ul class="current">
    
        
        <span>Get Started</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../start/get-started/index.html">Get started</a>
                    
                </li>
            
        

    
        
        <span>Configuration</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../configuration/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../configuration/settings/index.html">Settings</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../configuration/names-and-scopes/index.html">Names and Scopes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../configuration/modes/index.html">Modes</a>
                    
                </li>
            
        

    
        
        <span>Routing</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../get/index.html">GET Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../post/index.html">POST Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../put/index.html">PUT Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../delete/index.html">DELETE Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../options/index.html">OPTIONS Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../patch/index.html">PATCH Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../custom/index.html">Custom Routes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../params/index.html">Parameters</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../names/index.html">Names</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../conditions/index.html">Conditions</a>
                    
                </li>
            
                <li class="toctree-l1 current">
                    <a class="current" href="index.html">Middleware</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#what-is-route-middleware">What is route middleware?</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#how-do-i-add-route-middleware">How do I add route middleware?</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#what-arguments-are-passed-into-each-route-middleware-callable">What arguments are passed into each route middleware callable?</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../groups/index.html">Groups</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../helpers/index.html">Helpers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../rewrite/index.html">URL Rewriting</a>
                    
                </li>
            
        

    
        
        <span>Environment</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../environment/overview/index.html">Overview</a>
                    
                </li>
            
        

    
        
        <span>Request</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/method/index.html">Method</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/headers/index.html">Headers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/body/index.html">Body</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/variables/index.html">Variables</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/cookies/index.html">Cookies</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/paths/index.html">Paths</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/xhr/index.html">XHR</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/helpers/index.html">Helpers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../request/content-types/index.html">Content-Types</a>
                    
                </li>
            
        

    
        
        <span>Response</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../response/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../response/status/index.html">Status</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../response/headers/index.html">Headers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../response/body/index.html">Body</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../response/cookies/index.html">Cookies</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../response/helpers/index.html">Helpers</a>
                    
                </li>
            
        

    
        
        <span>View</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../view/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../view/rendering/index.html">Rendering</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../view/custom/index.html">Custom</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../view/data/index.html">Data</a>
                    
                </li>
            
        

    
        
        <span>HTTP Cache</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../cache/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../cache/etag/index.html">ETag</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../cache/lastmodified/index.html">Last Modified</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../cache/expires/index.html">Expires</a>
                    
                </li>
            
        

    
        
        <span>Middleware</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../middleware/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../middleware/how-to-use/index.html">How to Use</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../middleware/how-to-write/index.html">How to Write</a>
                    
                </li>
            
        

    
        
        <span>Hooks</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../hooks/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../hooks/how-to-use/index.html">How to Use</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../hooks/defaults/index.html">Defaults</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../hooks/custom/index.html">Custom</a>
                    
                </li>
            
        

    
        
        <span>Flash Messages</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../flash/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../flash/next/index.html">Next</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../flash/now/index.html">Now</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../flash/keep/index.html">Keep</a>
                    
                </li>
            
        

    
        
        <span>Sessions</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../sessions/native/index.html">Native</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../sessions/cookies/index.html">Cookies</a>
                    
                </li>
            
        

    
        
        <span>Logging</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../logging/activate/index.html">Activate</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../logging/levels/index.html">Levels</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../logging/writers/index.html">Writers</a>
                    
                </li>
            
        

    
        
        <span>Error Handling</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../errors/overview/index.html">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../errors/500/index.html">500 System Error</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../errors/404/index.html">404 Not Found</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../errors/debug/index.html">Debug Mode</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../errors/output/index.html">Output</a>
                    
                </li>
            
        

    
        
        <span>Dependency Injection</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../di/overview/index.html">Overview</a>
                    
                </li>
            
        

    
</ul>

      </div>
       
    </nav>

    <section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">

      
      <nav aria-label="top navigation" class="wy-nav-top" role="navigation">
        <i class="icon icon-reorder" data-toggle="wy-nav-top"></i>
        <a href="../../index.html"></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div aria-label="breadcrumbs navigation" role="navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> »</li>
    <li>Middleware</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <p>Slim enables you to associate middleware with a specific application route. When the given route matches the current
HTTP request and is invoked, Slim will first invoke the associated middleware in the order they are defined.</p>
<h3 id="what-is-route-middleware"><a class="dashAnchor" name="//apple_ref/cpp/Section/What%20is%20route%20middleware%3F"></a>What is route middleware?</h3>
<p>Route middleware is anything that returns <code>true</code> for <code>is_callable</code>. Route middleware will be invoked in the sequence
defined before its related route callback is invoked.</p>
<h3 id="how-do-i-add-route-middleware"><a class="dashAnchor" name="//apple_ref/cpp/Section/How%20do%20I%20add%20route%20middleware%3F"></a>How do I add route middleware?</h3>
<p>When you define a new application route with the Slim application’s <code>get()</code>, <code>post()</code>, <code>put()</code>, or <code>delete()</code> methods
you must define a route pattern and a callable to be invoked when the route matches an HTTP request.</p>
<pre><code>&lt;?php
$app = new \Slim\Slim();
$app-&gt;get('/foo', function () {
    //Do something
});
</code></pre>
<p>In the example above, the first argument is the route pattern. The last argument is the callable to be invoked when
the route matches the current HTTP request. The route pattern must always be the first argument. The route callable
must always be the last argument.</p>
<p>You can assign middleware to this route by passing each middleware as a separate interior or... (ahem) middle...
argument like this:</p>
<pre><code>&lt;?php
function mw1() {
    echo "This is middleware!";
}
function mw2() {
    echo "This is middleware!";
}
$app = new \Slim\Slim();
$app-&gt;get('/foo', 'mw1', 'mw2', function () {
    //Do something
});
</code></pre>
<p>When the /foo route is invoked, the <code>mw1</code> and <code>mw2</code> functions will be invoked in sequence before the route’s callable
is invoked.</p>
<p>Suppose you wanted to authenticate the current user against a given role for a specific route. You could use some
closure magic like this:</p>
<pre><code>&lt;?php
$authenticateForRole = function ( $role = 'member' ) {
    return function () use ( $role ) {
        $user = User::fetchFromDatabaseSomehow();
        if ( $user-&gt;belongsToRole($role) === false ) {
            $app = \Slim\Slim::getInstance();
            $app-&gt;flash('error', 'Login required');
            $app-&gt;redirect('/login');
        }
    };
};
$app = new \Slim\Slim();
$app-&gt;get('/foo', $authenticateForRole('admin'), function () {
    //Display admin control panel
});
</code></pre>
<h3 id="what-arguments-are-passed-into-each-route-middleware-callable"><a class="dashAnchor" name="//apple_ref/cpp/Section/What%20arguments%20are%20passed%20into%20each%20route%20middleware%20callable%3F"></a>What arguments are passed into each route middleware callable?</h3>
<p>Each middleware callable is invoked with one argument, the currently matched <code>\Slim\Route</code> object.</p>
<pre><code>&lt;?php
$aBitOfInfo = function (\Slim\Route $route) {
    echo "Current route is " . $route-&gt;getName();
};

$app-&gt;get('/foo', $aBitOfInfo, function () {
    echo "foo";
});
</code></pre>

            </div>
          </div>
          <footer>
  
    <div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
      
        <a class="btn btn-neutral float-right" href="../groups/index.html" title="Groups">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a class="btn btn-neutral" href="../conditions/index.html" title="Conditions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../conditions/index.html" style="color: #fcfcfc;">« Previous</a></span>
      <span style="margin-left: 15px"><a href="../groups/index.html" style="color: #fcfcfc">Next »</a></span>
    </span>
</div>



</body><!-- Mirrored from docs.slimframework.com/routing/middleware/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 May 2015 15:53:13 GMT --></html>